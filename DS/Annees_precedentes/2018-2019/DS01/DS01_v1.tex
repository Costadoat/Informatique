\newcommand{\nom}{DS01 Informatique}
\newcommand{\sequence}{01}
\newcommand{\num}{01}
\newcommand{\type}{DS}
\newcommand{\descrip}{Fait le 08/10/2016}
\newcommand{\competences}{Alg-C6 : Justifier qu'une itération (ou boucle) produit l'effet attendu au moyen d'un invariant \\ & Alg-C7 : démontrer qu'une boucle se termine effectivement \\ & Déc-C1: Manipuler en mode utilisateur les principales fonctions d'un système d'exploitation et d'un environnement de développement \\ & Déc-C2: Appréhender les limitations intrinsèques à la manipulation informatique des nombres \\ & Déc-C3: Initier un sens critique au sujet de la qualité et de la précision des résultats de calculs numériques sur ordinateur}

\input{../../headers/dsinfoheaders.tex}

\begin{center}
 \Large Les 3 parties sont à rendre sur des copies séparées.
\end{center}

\section{Introduction}

\paragraph{Question 1:} Écrire sur le diagramme de Contexte donné en document réponse le nom des composants de l'unité centrale.

\paragraph{Question 2:} Écrire sous la forme d'un mot de 32 bits respectant la norme IEEE 754 (signe, exposant, mantisse), le float $-\dfrac{5}{6}$.

\paragraph{Question 3:} Traduire en float le mot de 32 bits suivant.

\setlength{\tabcolsep}{0.1cm}
\begin{center}
\begin{tabular}{|*{32}{l|}}
\hline
S & \multicolumn{8}{c|}{Exposant} & \multicolumn{23}{c|}{Mantisse} \\
\hline
0 & 1 & 0 & 0 & 0 & 1 & 0 & 0 & 1 & 1 & 1 & 1 & 1 & 0 & 1 & 1 & 1 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\
\hline
\end{tabular}
\end{center}

\section{Compte à rebours}

Le programme python permet de générer un compte à rebours en affichant les minutes et les secondes restantes. La fonction \verb?time.sleep(1)? permet de faire en sorte que la boucle dure environ une seconde.

\begin{GrayBox}[0.75\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
import time

a=200 #duree en seconde a decompter
for i in range(1,a):
    time.sleep(1) # attente d'une seconde
    m=(a-i)//60 # calcul des minutes
    s=(a-i)%60 # calcul des secondes
    print '%s:%s' % (m,s)
\end{listing}
\end{GrayBox}

\paragraph{Question 4:} D'après le code présenté quelle sera la première valeur affichée au départ du compte à rebours.

~\

Une première amélioration du code serait d'intégrer à ce programme l'affichage des heures.

\paragraph{Question 5:} Proposer une modification pour que les heures soient calculées et affichées dans le programme. Vous proposerez un nouveau code en python pour répondre à ce besoin.

~\

Une animation du compte à rebours est souhaitée. Ainsi, un BIP devra être généré pour:
\begin{itemize}
 \item signaler une minute entière,
 \item chaque seconde des 10 dernières.
\end{itemize}

De même, la fin du compte à rebours devra être signalée par la séquence suivante:
\begin{itemize}
 \item 2 bips,
 \item 1 seconde de silence,
 \item 2 bips,
 \item 1 seconde de silence,
 \item 2 bips.
\end{itemize}

\paragraph{Question 6:} Proposer une modification afin que ces modifications soient prises en compte. Le BIP sera généré en utilisant l'instruction suivante. Vous proposerez un nouveau code en python pour répondre à ce besoin.

\begin{GrayBox}[0.75\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
import winsound

winsound.Beep(2500,1000)
\end{listing}
\end{GrayBox}

\section{Calcul de 2\textsuperscript{n}}

L'objectif du code suivant est de calculer 2\textsuperscript{n}.

\begin{GrayBox}[0.9\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
def puissance_deux(n):
    y, n_loc = 1,n
    while n_loc > 0:
        y = y*2
        n_loc = n_loc-1
    return y
\end{listing}
\end{GrayBox}

\paragraph{Question 7:} Écrire pour chaque itération de la boucle les valeurs de \verb?y? et de \verb?n_loc? pour le
calcul de \verb?puissance_deux(4)?.

\begin{itemize}
 \item \verb?y?\textsubscript{0}=... et \verb?n_loc?\textsubscript{0}=...,
 \item \verb?y?\textsubscript{1}=... et \verb?n_loc?\textsubscript{1}=...,
 \item \verb?y?\textsubscript{2}=... et \verb?n_loc?\textsubscript{2}=...,
 \item ...,
\end{itemize}

\paragraph{Question 8:} Montrer que la fonction se termine en utilisant un variant de boucle.

\paragraph{Question 9:} Montrer que $y_i = 2^{n-n_{loc,i}}$ est un invariant de boucle et conclure
que l'algorithme de calcul de $2^n$ grâce à la fonction \verb?puissance_deux(n)?
est correct.

\iffalse
\section{Message codé}

Le programme suivant permet de coder un message en décalant chaque lettre du message vers le haut, ainsi \verb?a? devient \verb?b?, \verb?b? devient \verb?c?, etc...

\begin{GrayBox}[0.9\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
def codage(mot):
    motcode=""
    li = ['a','b','c','d','e','f','g','h','i','j','k','l','m',
    'n','o','p','q','r','s','t','u','v','w','x','y','z','&']
    # la liste fait correspondre à une lettre un chiffre (a=1,...)
    for i in range(0,len(mot)): # lecture de tous les caractères
        if mot[i] == ' ': # si c'est un espace ne rien faire
            newlettre = mot[i]
        else: 
            p=li.index(mot[i]) # p: chiffre correspondant à la lettre
            newlettre =  li[p+1]
        motcode = motcode[:i] + newlettre
    return motcode
\end{listing}
\end{GrayBox}

Il doit être utilisé de la manière suivante.

\begin{GrayBox}[0.75\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
message="bonjour les ptsi de dorian"
messagecode=codage(message)
\end{listing}
\end{GrayBox}

Manipulation d'une liste ou d'une chaîne de caractères:
\begin{itemize}
 \item \verb?mot[i]? ou \verb?li[i]? permet d'obtenir le i\up{ème} élément de la chaîne de  caractères \verb?mot? ou de la liste \verb?li? (commence à 0),
 \item \verb?li.index('a')? revoie la numérotation des positions commençant à 0. Exemple: \verb?['c','h','a','t'].index('h')=1?.
\end{itemize}

\paragraph{Question 7:} Prédire le résultat de l'instruction suivante \verb?print messagecode? qui serait effectuée à la suite des instructions précédentes.

\paragraph{Question 8:} Proposer une modification de cet algorithme afin de décoder ce message. Vous proposerez un nouveau code en python pour répondre à ce besoin.

\paragraph{Question 9:} Prédire le résultat de l'instruction suivante \verb?print messagecode? lorsque le message d'entrée serait \verb?message="venez tous a dorian"?.
\fi

\newpage

~\

\newpage
\cleardoublepage

\section{Document réponse}

Nom:.....................\\
Prénom:......................


\begin{center}
 \includegraphics[width=0.9\linewidth]{img/unite_centrale_vierge}
\end{center}

\ifdef{\public}{\end{document}}{}

\newpage
\cleardoublepage

\pagestyle{correction}\setcounter{section}{0}

\section{Correction}

\paragraph{Question 1:}

\begin{center}
 \includegraphics[width=0.9\linewidth]{img/unite_centrale_corrige}
\end{center}

\paragraph{Question 2:}

Le nombre à traduire est $-\dfrac{5}{6}$.

\begin{tabular}{c c c c c c c c c c}
0,833.. & x & 2 & = & 1,66.. & = &  1 & + & 0,66.. \\
0,666.. & x & 2 & = & 1,33.. & = &  1 & + & 0,33.. \\
0,333.. & x & 2 & = & 0,66.. & = &  0 & + & 0,66.. \\
0,666.. & x & 2 & = & 1,33.. & = &  1 & + & 0,33.. \\
0,333.. & x & 2 & = & 0,66.. & = &  0 & + & 0,66.. \\
...
\end{tabular}

On remarque un récurrence dans l'écriture du $0,833_{10}$ en binaire: $0,833.._{10}=0,11010.._2$

$1,\underbrace{1010...1}_{23 bits}*2^{-1}$

\begin{itemize}
 \item Signe = $1$,
 \item Mantisse:$\underbrace{1010...1}_{23 bits}$,
 \item Exposant:$127-1=126_{10}=0111110_2$
\end{itemize}

\setlength{\tabcolsep}{0.1cm}
\begin{center}
\begin{scriptsize}
\begin{tabular}{|*{32}{l|}}
\hline
S & \multicolumn{8}{c|}{Exposant} & \multicolumn{23}{c|}{Mantisse} \\
\hline
1 & 0 & 1 & 1 & 1 & 1 & 1 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 & 0 & 1 \\
\hline
\end{tabular}
\end{scriptsize}
\end{center}

\paragraph{Question 3:} 

Exposant: $10001001=1+8+128=137$ \\
Exposant simple: $137-127=10$\\
Mantisse: $1,11110111101000000000000_2*2^{10}$ \\
Nombre $11111011110,1_2=2048_{10}-1_{10}-32_{10}-1_{10}+0.5_{10}=2014.5_{10}$.

\paragraph{Question 4:} L'affichage au départ sera de \verb?199?, soit \verb?3:19?.

\paragraph{Question 5:} 

\begin{GrayBox}[0.75\textwidth]
\begin{verbatim}
import time

a=7210
for i in range(1,a):
    time.sleep(1) #attente d'une seconde
    h=(a-i)//3600
    m=((a-i)%3600)//60
    s=((a-i)%3600)%60
    print '%s:%s:%s' % (h,m,s)
\end{verbatim}
\end{GrayBox}

\paragraph{Question 6:} 

\begin{GrayBox}[0.75\textwidth]
\begin{verbatim}
import time
import winsound

a=150
for i in range(1,a):
    time.sleep(1) #attente d'une seconde
    h=(a-i)//3600
    m=((a-i)%3600)//60
    s=((a-i)%3600)%60
    print '%s:%s:%s' % (h,m,s)
    if s == 0 and (m!=0 or h!=0):
        winsound.Beep(2500,500)
    if a < 10:
        winsound.Beep(2500,500)


for i in range(1,4):
    for j in range(1,3):
        winsound.Beep(2500,500)
    time.sleep(1)
\end{verbatim}
\end{GrayBox}


\paragraph{Question 7:} Écrire pour chaque itération de la boucle les valeurs de \verb?y? et de \verb?n_loc?, pour le calcul de \verb?puissance_deux(4)?.

\begin{itemize}
 \item \verb?y?\textsubscript{0}=1 et \verb?n_loc?\textsubscript{0}=4,
 \item \verb?y?\textsubscript{1}=2 et \verb?n_loc?\textsubscript{1}=3,
 \item \verb?y?\textsubscript{2}=4 et \verb?n_loc?\textsubscript{2}=2,
 \item \verb?y?\textsubscript{3}=8 et \verb?n_loc?\textsubscript{3}=1,
 \item \verb?y?\textsubscript{4}=16 et \verb?n_loc?\textsubscript{4}=0.
\end{itemize}

\paragraph{Question 8:} Montrer que la fonction se termine en utilisant un variant de boucle.

Le variant de boucle est \verb?n_loc?, car:
\begin{itemize}
 \item il est strictement décroissant (il décroit de 1 à chaque étape),
 \item il est strictement positif, il démarre à n (positif) décroit et s'arrête dès qu'il est négatif ou nul.
\end{itemize}

\paragraph{Question 9:}

A l'étape initiale,
\verb?y?\textsubscript{0}=\verb?2**(n-n_loc?\textsubscript{0}\verb?)?=\verb?2**(n-n)?=\verb?2**(0)?=\verb?1?, la condition est vraie.

Soit,
\verb?y?\textsubscript{i}=\verb?2**(n-n_loc?\textsubscript{i}\verb?)?,

\verb?y?\textsubscript{i+1}=\verb?2*2**(n-n_loc?\textsubscript{i}\verb?)?=\verb?2**(n-n_loc?\textsubscript{i}\verb?+1)?,

\verb?y?\textsubscript{i+1}=\verb?2**(n-(n_loc?\textsubscript{i}\verb?-1))?=\verb?2**(n-(n_loc?\textsubscript{i+1})\verb?)?.

~\

Donc $y_i=2^{n-n_{loc,i}}$ est bien un invariant de boucle. La valeur finale de $n_{loc}$ est $0$, ainsi la valeur finale de $y$ est $2^n$. C'est bien la valeur attendue, l'algorithme de calcul de $2^n$ grâce à la
fonction \verb?puissance_deux(n)? est donc correct.

\end{document}

\paragraph{Question 7:} Le message codé est alors \verb?cpokpvs mft qutj ef epsjbo?.

\paragraph{Question 8:} 

Le programme de décodage est le suivant.

\begin{GrayBox}[0.8\textwidth]
\begin{verbatim}
def decodage(mot):
    motdecode=""
    li = ['a','b','c','d','e','f','g','h','i','j','k','l','m',
    'n','o','p','q','r','s','t','u','v','w','x','y','z','&']
    for i in range(0,len(mot)):
        if mot[i] == ' ':       
            newlettre = mot[i]
        else: 
            p=li.index(mot[i])
            newlettre =  li[p-1]
        motdecode = motdecode[:i] + newlettre
    return motdecode
\end{verbatim}
\end{GrayBox}

\paragraph{Question 9:} Le message codé est alors \verb?wfof& upvt b epsjbo?.

\end{document}