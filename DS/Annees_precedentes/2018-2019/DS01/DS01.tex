\newcommand{\nom}{DS01 Informatique}
\newcommand{\sequence}{01}
\newcommand{\num}{01}
\newcommand{\type}{DS}
\newcommand{\descrip}{Fait le 06/10/2018}
\newcommand{\competences}{Alg-C6 : Justifier qu'une itération (ou boucle) produit l'effet attendu au moyen d'un invariant \\ & Alg-C7 : démontrer qu'une boucle se termine effectivement \\ & Déc-C1: Manipuler en mode utilisateur les principales fonctions d'un système d'exploitation et d'un environnement de développement \\ & Déc-C2: Appréhender les limitations intrinsèques à la manipulation informatique des nombres \\ & Déc-C3: Initier un sens critique au sujet de la qualité et de la précision des résultats de calculs numériques sur ordinateur}

\input{../../headers/dsinfoheaders.tex}

\begin{center}
 \Large Les 3 parties sont à rendre sur des copies séparées.
\end{center}

\section{Introduction}

\paragraph{Question 1:} Écrire sur le diagramme de Contexte donné en document réponse le nom des composants de l'unité centrale.

\paragraph{Question 2:} Écrire sous la forme d'un mot de 32 bits respectant la norme IEEE 754 (signe, exposant, mantisse), le float $\dfrac{13}{9}=1,4444...$.

\paragraph{Question 3:} Traduire en float le mot de 32 bits suivant.

\setlength{\tabcolsep}{0.1cm}
\begin{center}
\begin{tabular}{|*{32}{l|}}
\hline
S & \multicolumn{8}{c|}{Exposant} & \multicolumn{23}{c|}{Mantisse} \\
\hline
0 & 1 & 0 & 0 & 0 & 1 & 1 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & 1 & 0 & 0 & 0 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0 & 0\\
\hline
\end{tabular}
\end{center}

\section{Emploi du temps EPS}

Un collège partage l'utilisation de la piscine avec le collège voisin. Les élèves pratiquent donc un sport au lycée, sauf s'ils peuvent avoir piscine (si elle est libre et si c'est leur tour). La gestion des sports en EPS pour les 3 classes de 6\up{ème} s'effectue comme suit:
\begin{itemize}
 \item une rotation des sports pour chaque classe:
 \begin{itemize}
  \item Semaine I: les 6\up{ème} A (6A) ont Football, les 6\up{ème} C (6C) Basket-Ball, les 6\up{ème} B (6B) Volley-Ball,
  \item Semaine I+1: les 6\up{ème} B ont Football, les 6\up{ème} A Basket-Ball, les 6\up{ème} C Volley-Ball,
  \item Semaine I+2: les 6\up{ème} C ont Football, les 6\up{ème} B Basket-Ball, les 6\up{ème} A Volley-Ball,...
 \end{itemize}
 \item la piscine (ouverte une semaine sur deux) est prioritaire sur les autres sports,
 \begin{itemize}
  \item Semaine J: les 6\up{ème} A ont piscine et pas d'autre sport,
  \item Semaine J+2: les 6\up{ème} B ont piscine et pas d'autre sport,
  \item Semaine J+4: les 6\up{ème} C ont piscine et pas d'autre sport,...
 \end{itemize}
\end{itemize}

~\

Le programme python de la page suivante permet d'afficher un tableau pour lequel chaque ligne correspond à une semaine, on a par exemple extrait les lignes suivantes:

\begin{center}
\renewcommand{\verbatimtabsize}{3}
\lstset{frameround=tttt}
\begin{lstlisting}[linewidth=0.85\linewidth,frame=trbl,backgroundcolor=\color{bleuc},rulecolor=\color{bleuf},breaklines]
Semaine 17 Piscine 6C	Football 6A Basket 6C Volley 6B
Semaine 18 Piscine	Football 6C Basket 6B Volley 6A
\end{lstlisting}
\end{center}


On rappelle que cela signifie que semaine 17, les 6\up{ème} C vont à la piscine et n'ont pas Basket car la piscine est prioritaire. Semaine 18, personne n'a piscine.

\newpage

\begin{center}
\renewcommand{\verbatimtabsize}{3}
\lstset{frameround=tttt,showstringspaces=false}
\begin{lstlisting}[linewidth=0.85\linewidth,frame=trbl,backgroundcolor=\color{bleuc},rulecolor=\color{bleuf},numbers=right,language=python,breaklines]
semaine=1

while semaine < 45:
    #Piscine
    if semaine%6==1:
        piscine='6A'
    elif semaine%6==3:
        piscine='6B'
    elif semaine%6==5:
        piscine='6C'
    else:
        piscine=''
 
    #Sport collectif
    if semaine%3==2:
        foot='6A'
        basket='6C'
        volley='6B'
    elif semaine%3==1:
        foot='6B'
        basket='6A'
        volley='6C'
    else:
        foot='6C'
        basket='6B'
        volley='6A'

    print "Semaine %s \t Piscine %s \t Football %s \t Basket %s \t Volley %s" % (semaine, piscine, foot, basket, volley)
    semaine=semaine+1
\end{lstlisting}
\end{center}

\paragraph{Question 4:} D'après le code présenté quel est le programme de la première semaine (semaine 1) ? Quel sera le programme de la dernière semaine (semaine 44) ?

\paragraph{Question 5:} Que signifie "\verb?\t?" dans le script ? En quoi est-ce intéressant de l'utiliser ici ?

~\

Le professeur de techno a pensé améliorer les script en supprimant les lignes 11 et 12 comme suit:

\begin{center}
\renewcommand{\verbatimtabsize}{3}
\lstset{frameround=tttt}
\begin{lstlisting}[linewidth=0.85\linewidth,frame=trbl,backgroundcolor=\color{bleuc},rulecolor=\color{bleuf},numbers=right,language=python,breaklines,firstnumber=10]
        piscine='6C'
 
    #Sport collectif
\end{lstlisting}
\end{center}

\paragraph{Question 6:} Sa solution fonctionne-t-elle ? Quel est le problème ?

~\

Il a été décidé de revenir à la solution initiale. Pourtant, malgré les explications, très claires, des enseignants, les élèves oublient que la piscine est prioritaire sur les autres sports et ne prennent pas leur maillot la bonne semaine. Il est envisagé de ne pas faire afficher la classe à côté du sport normal la semaine où celle-ci à piscine. L'exemple précédent deviendrait alors:

\begin{center}
\renewcommand{\verbatimtabsize}{3}
\lstset{frameround=tttt}
\begin{lstlisting}[linewidth=0.85\linewidth,frame=trbl,backgroundcolor=\color{bleuc},rulecolor=\color{bleuf},breaklines]
Semaine 17 Piscine 6C Football 6A Basket    Volley 6B
Semaine 18 Piscine    Football 6C Basket 6B Volley 6A
\end{lstlisting}
\end{center}

\paragraph{Question 7:} Proposer une modification du script pour que l'affichage du programme corresponde à cette proposition.

\section{Calcul de 2\textsuperscript{n}}

L'objectif du code suivant est de calculer 2\textsuperscript{n}.

\begin{center}
\renewcommand{\verbatimtabsize}{3}
\lstset{frameround=tttt}
\begin{lstlisting}[linewidth=0.85\linewidth,frame=trbl,backgroundcolor=\color{bleuc},rulecolor=\color{bleuf},numbers=right,language=python,breaklines]
def puissance_deux(n):
    y, n_loc = 1,n
    while n_loc > 0:
        y = y*2
        n_loc = n_loc-1
    return y
\end{lstlisting}
\end{center}

\paragraph{Question 8:} Écrire pour chaque itération de la boucle les valeurs de \verb?y? et de \verb?n_loc? pour le
calcul de \verb?puissance_deux(4)?.

\begin{itemize}
 \item \verb?y?\textsubscript{0}=... et \verb?n_loc?\textsubscript{0}=...,
 \item \verb?y?\textsubscript{1}=... et \verb?n_loc?\textsubscript{1}=...,
 \item \verb?y?\textsubscript{2}=... et \verb?n_loc?\textsubscript{2}=...,
 \item ...,
\end{itemize}

\paragraph{Question 9:} Que se passe-t-il si \verb?n? est négatif ?

\paragraph{Question 10:} Proposer une modification pour calculer $2^n$ avec ($n<0$) ?

\iffalse
\section{Message codé}

Le programme suivant permet de coder un message en décalant chaque lettre du message vers le haut, ainsi \verb?a? devient \verb?b?, \verb?b? devient \verb?c?, etc...

\begin{GrayBox}[0.9\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
def codage(mot):
    motcode=""
    li = ['a','b','c','d','e','f','g','h','i','j','k','l','m',
    'n','o','p','q','r','s','t','u','v','w','x','y','z','&']
    # la liste fait correspondre à une lettre un chiffre (a=1,...)
    for i in range(0,len(mot)): # lecture de tous les caractères
        if mot[i] == ' ': # si c'est un espace ne rien faire
            newlettre = mot[i]
        else: 
            p=li.index(mot[i]) # p: chiffre correspondant à la lettre
            newlettre =  li[p+1]
        motcode = motcode[:i] + newlettre
    return motcode
\end{listing}
\end{GrayBox}

Il doit être utilisé de la manière suivante.

\begin{GrayBox}[0.75\textwidth]
\renewcommand{\verbatimtabsize}{3}
\begin{listing}[1]{1}
message="bonjour les ptsi de dorian"
messagecode=codage(message)
\end{listing}
\end{GrayBox}

Manipulation d'une liste ou d'une chaîne de caractères:
\begin{itemize}
 \item \verb?mot[i]? ou \verb?li[i]? permet d'obtenir le i\up{ème} élément de la chaîne de  caractères \verb?mot? ou de la liste \verb?li? (commence à 0),
 \item \verb?li.index('a')? revoie la numérotation des positions commençant à 0. Exemple: \verb?['c','h','a','t'].index('h')=1?.
\end{itemize}

\paragraph{Question 7:} Prédire le résultat de l'instruction suivante \verb?print messagecode? qui serait effectuée à la suite des instructions précédentes.

\paragraph{Question 8:} Proposer une modification de cet algorithme afin de décoder ce message. Vous proposerez un nouveau code en python pour répondre à ce besoin.

\paragraph{Question 9:} Prédire le résultat de l'instruction suivante \verb?print messagecode? lorsque le message d'entrée serait \verb?message="venez tous a dorian"?.
\fi

\newpage

\section{Document réponse}

Nom:.....................\\
Prénom:......................


\begin{center}
 \includegraphics[width=0.9\linewidth]{img/unite_centrale_vierge}
\end{center}

\ifdef{\public}{\end{document}}{}

\newpage

~\

\newpage
\cleardoublepage

\pagestyle{correction}\setcounter{section}{0}

\section{Correction}

\paragraph{Question 1:}

\begin{center}
 \includegraphics[width=0.9\linewidth]{img/unite_centrale_corrige}
\end{center}

\paragraph{Question 2:}

Le nombre à traduire est $\dfrac{13}{9}=1,4444$.

\begin{tabular}{c c c c c c c c c c}
0,444.. & x & 2 & = & 0,88.. & = &  0 & + & 0,88.. \\
0,888.. & x & 2 & = & 1,77.. & = &  1 & + & 0,77.. \\
0,777.. & x & 2 & = & 1,55.. & = &  1 & + & 0,55.. \\
0,555.. & x & 2 & = & 1,11.. & = &  1 & + & 0,11.. \\
0,111.. & x & 2 & = & 0,22.. & = &  0 & + & 0,22.. \\
0,222.. & x & 2 & = & 0,44.. & = &  0 & + & 0,44.. \\
0,444.. & x & 2 & = & 0,88.. & = &  0 & + & 0,88.. \\
...
\end{tabular}

On remarque un récurrence dans l'écriture du $1,444_{10}$ en binaire: $1,444.._{10}=1,01110001110.._2$

$1,\underbrace{01110001...10}_{23 bits}*2^{0}$

\begin{itemize}
 \item Signe = $0$,
 \item Mantisse:$\underbrace{011100...10}_{23 bits}$,
 \item Exposant:$127+0=127_{10}=01111111_2$
\end{itemize}

\setlength{\tabcolsep}{0.1cm}
\begin{center}
\begin{scriptsize}
\begin{tabular}{|*{32}{l|}}
\hline
S & \multicolumn{8}{c|}{Exposant} & \multicolumn{23}{c|}{Mantisse} \\
\hline
0 & 0 & 1 & 1 & 1 & 1 & 1 & 1 & 1 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 1 & 1 & 1 & 0 & 0 & 0 & 1 & 1 & 1 & 0 \\
\hline
\end{tabular}
\end{scriptsize}
\end{center}

\paragraph{Question 3:} 

Exposant: $10001101=1+4+8+128=141$ \\
Exposant simple: $141-127=14$\\
Mantisse: $1,00010100010100000000000_2*2^{14}$ \\
Nombre $1000101000101_2*2^{2}=(4096_{10}+256_{10}+64_{10}+4_{10}+1_{10})*4=17684_{10}$.

\newpage

\paragraph{Question 4:} Programme des semaines 1 et 44.

Le reste de la division euclidienne de 1 par 6 est 1 et par 3 est 1. Le reste de la division euclidienne de 44 par 6 est 2, et par 3, c'est 2.

\begin{GrayBox}[0.85\textwidth]
\renewcommand{\verbatimtabsize}{3}
S1 	\ \ Piscine 6A 	 Football 6B 	 Basket XX 	 Volley 6C \\
S44	Piscine    Football 6A 	 Basket 6C 	 Volley 6B
\end{GrayBox}

\paragraph{Question 5:} Le symbole "\verb?\t?" insère une tabulation dans le texte. Cela permet ici d'aligner les colonnes de chaque sport et d'afficher le résultat comme un tableau.

\paragraph{Question 6:} Sa solution ne fonctionne pas car dans son tableau résultat, il sera écrit que les 6\up{ème} C ont piscine même les semaines où c'est au tour de l'autre collège.

\paragraph{Question 7:} 

\begin{center}
\renewcommand{\verbatimtabsize}{3}
\lstset{frameround=tttt}
\begin{lstlisting}[linewidth=0.85\linewidth,frame=trbl,backgroundcolor=\color{bleuc},rulecolor=\color{bleuf},numbers=right,language=python,breaklines]
semaine=1

while semaine < 45:
    #Piscine
    if semaine%6==1:
        piscine='6A'
    elif semaine%6==3:
        piscine='6B'
    elif semaine%6==5:
        piscine='6C'
 
    #Sport collectif
    if semaine%3==2:
        foot='6A'
        basket='6C'
        volley='6B'
    elif semaine%3==1:
        foot='6B'
        basket='6A'
        volley='6C'
    else:
        foot='6C'
        basket='6B'
        volley='6A'

    if piscine==foot:
        foot=''
    elif piscine==basket:
        basket=''
    elif piscine==volley:
        volley=''
    print "Semaine %s \t Piscine %s \t Football %s \t Basket %s \t Volley %s" % (semaine, piscine, foot, basket, volley)
    semaine=semaine+1 
\end{lstlisting}
\end{center}

\paragraph{Question 8:} Écrire pour chaque itération de la boucle les valeurs de \verb?y? et de \verb?n_loc?, pour le calcul de \verb?puissance_deux(4)?.

\begin{itemize}
 \item \verb?y?\textsubscript{0}=1 et \verb?n_loc?\textsubscript{0}=4,
 \item \verb?y?\textsubscript{1}=2 et \verb?n_loc?\textsubscript{1}=3,
 \item \verb?y?\textsubscript{2}=4 et \verb?n_loc?\textsubscript{2}=2,
 \item \verb?y?\textsubscript{3}=8 et \verb?n_loc?\textsubscript{3}=1,
 \item \verb?y?\textsubscript{4}=16 et \verb?n_loc?\textsubscript{4}=0.
\end{itemize}

\paragraph{Question 9:} Si \verb?n? est négatif, \verb?n_loc? est négatif et \verb?y=1?. L'étape \verb?while n_loc > 0? rejette ce cas de figure : on n'entre pas dans la boucle \verb?while?. Donc \verb?y? n'est pas modifié. Le programme retourne 1.

\paragraph{Question 10:} 

\begin{GrayBox}[0.75\textwidth]
\begin{verbatim}
def puissance_deux(n):
    y, n_loc = 1, n
    if n>0:
        while n_loc > 0:
            y=y*2
            n_loc = n_loc-1
    else:
        while n_loc < 0:
            y=y/2.
            n_loc = n_loc+1
    return y
\end{verbatim}
\end{GrayBox}

\end{document}

\paragraph{Question 8:} Montrer que la fonction se termine en utilisant un variant de boucle.

Le variant de boucle est \verb?n_loc?, car:
\begin{itemize}
 \item il est strictement décroissant (il décroit de 1 à chaque étape),
 \item il est strictement positif, il démarre à n (positif) décroit et s'arrête dès qu'il est négatif ou nul.
\end{itemize}

\paragraph{Question 9:}

A l'étape initiale,
\verb?y?\textsubscript{0}=\verb?2**(n-n_loc?\textsubscript{0}\verb?)?=\verb?2**(n-n)?=\verb?2**(0)?=\verb?1?, la condition est vraie.

Soit,
\verb?y?\textsubscript{i}=\verb?2**(n-n_loc?\textsubscript{i}\verb?)?,

\verb?y?\textsubscript{i+1}=\verb?2*2**(n-n_loc?\textsubscript{i}\verb?)?=\verb?2**(n-n_loc?\textsubscript{i}\verb?+1)?,

\verb?y?\textsubscript{i+1}=\verb?2**(n-(n_loc?\textsubscript{i}\verb?-1))?=\verb?2**(n-(n_loc?\textsubscript{i+1})\verb?)?.

~\

Donc $y_i=2^{n-n_{loc,i}}$ est bien un invariant de boucle. La valeur finale de $n_{loc}$ est $0$, ainsi la valeur finale de $y$ est $2^n$. C'est bien la valeur attendue, l'algorithme de calcul de $2^n$ grâce à la
fonction \verb?puissance_deux(n)? est donc correct.


\paragraph{Question 7:} Le message codé est alors \verb?cpokpvs mft qutj ef epsjbo?.

\paragraph{Question 8:} 

Le programme de décodage est le suivant.

\begin{GrayBox}[0.8\textwidth]
\begin{verbatim}
def decodage(mot):
    motdecode=""
    li = ['a','b','c','d','e','f','g','h','i','j','k','l','m',
    'n','o','p','q','r','s','t','u','v','w','x','y','z','&']
    for i in range(0,len(mot)):
        if mot[i] == ' ':       
            newlettre = mot[i]
        else: 
            p=li.index(mot[i])
            newlettre =  li[p-1]
        motdecode = motdecode[:i] + newlettre
    return motdecode
\end{verbatim}
\end{GrayBox}

\paragraph{Question 9:} Le message codé est alors \verb?wfof& upvt b epsjbo?.

\end{document}